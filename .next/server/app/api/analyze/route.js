"use strict";(()=>{var e={};e.id=652,e.ids=[652],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},5315:e=>{e.exports=require("path")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1764:e=>{e.exports=require("util")},2623:e=>{e.exports=require("worker_threads")},1568:e=>{e.exports=require("zlib")},7561:e=>{e.exports=require("node:fs")},4492:e=>{e.exports=require("node:stream")},2477:e=>{e.exports=require("node:stream/web")},1282:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>d,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{POST:()=>c});var s=t(9303),a=t(8716),n=t(670),i=t(7070),p=t(5563);async function c(e){try{let{jobDescription:r,userSkills:t}=await e.json();if(!r||"string"!=typeof r)return i.NextResponse.json({error:"jobDescription is required"},{status:400});let o=await (0,p.ge)(r,t??[]);return i.NextResponse.json({skills:o.skills.map(e=>e.name),matchScore:o.matchScore,summary:o.summary})}catch(e){return console.error("[analyze] Error:",e),i.NextResponse.json({error:"Failed to analyze job description"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/analyze/route",pathname:"/api/analyze",filename:"route",bundlePath:"app/api/analyze/route"},resolvedPagePath:"/tmp/hireme-deploy/src/app/api/analyze/route.ts",nextConfigOutput:"export",userland:o}),{requestAsyncStorage:u,staticGenerationAsyncStorage:m,serverHooks:d}=l,h="/api/analyze/route";function y(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:m})}},5563:(e,r,t)=>{t.d(r,{bE:()=>n,ge:()=>a});var o=t(4214);if(!process.env.OPENAI_API_KEY)throw Error("Missing OPENAI_API_KEY environment variable. Get one at https://platform.openai.com/api-keys");let s=new o.ZP({apiKey:process.env.OPENAI_API_KEY});async function a(e,r){let t=await s.chat.completions.create({model:"gpt-4",temperature:.3,messages:[{role:"system",content:`You are a career analyst AI. Analyze job descriptions and compare them against a candidate's skills.
Return a JSON object with:
- "skills": array of { "name": string, "category": string } extracted from the job description
- "matchScore": number 0-100 representing how well the candidate matches
- "summary": one-paragraph summary of the role
- "suggestions": array of strings with improvement suggestions

Categories: "technical", "soft", "domain", "tool", "language"
Only return valid JSON.`},{role:"user",content:`Job Description:
${e}

Candidate Skills: ${r.join(", ")||"Not specified"}`}],response_format:{type:"json_object"}}),o=t.choices[0]?.message?.content;if(!o)throw Error("Empty response from OpenAI");return JSON.parse(o)}async function n(e){let r=await s.chat.completions.create({model:"gpt-4",temperature:.7,messages:[{role:"system",content:`You are an expert career coach who writes compelling, personalized cover letters.
Write in a professional but warm tone. Be specific â€” reference the company and role.
Keep it to 3-4 paragraphs. Do not use generic filler phrases.`},{role:"user",content:`Write a cover letter for:
Role: ${e.jobTitle} at ${e.company}
Job Description: ${e.jobDescription}
My Skills: ${e.userSkills.join(", ")||"General professional skills"}
My Name: ${e.userName||"the candidate"}`}]}),t=r.choices[0]?.message?.content;if(!t)throw Error("Empty response from OpenAI");return t}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,972,214],()=>t(1282));module.exports=o})();