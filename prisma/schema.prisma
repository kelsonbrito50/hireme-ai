generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ─── Application Models ─────────────────────────────────────────────────────

enum ApplicationStatus {
  SAVED
  APPLIED
  INTERVIEWING
  OFFERED
  REJECTED
  WITHDRAWN
}

model JobApplication {
  id          String            @id @default(cuid())
  title       String
  company     String
  url         String?
  description String            @db.Text
  status      ApplicationStatus @default(SAVED)
  matchScore  Float?
  coverLetter String?           @db.Text
  skills      Skill[]
  userId      String
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  @@index([userId])
  @@index([status])
}

model Skill {
  id           String          @id @default(cuid())
  name         String
  category     String?
  application  JobApplication? @relation(fields: [applicationId], references: [id], onDelete: Cascade)
  applicationId String?

  @@index([name])
}
